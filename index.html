<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이 party에 준비된 birthday cake</title>

    <script src="/assets/js/jquery3.6.1.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="/assets/css/main.css">

    <link rel="apple-touch-icon" href="/apple_touch_icon.png">
    <link rel="icon" type="image/png" href="/favicon.ico">

    <meta property="og:title" content="이 party에 준비된 birthday cake" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://cakeshop-psi.vercel.app/" />
    <meta property="og:image" content="https://cakeshop-psi.vercel.app/assets/images/ogimage.png" />
</head>

<body>
    <section>
        <div class="section_cover section1">
            <p class="fontBasic30 center">형태와 컬러를<br>선택해주세요</p>
            <div class="select_array swiper-container body_select_array">
                <ul class="swiper-wrapper">
                    <li class="swiper-slide">
                        <div class="overlay_img cake1">
                            <div class="overlay_body_color body_color"></div>
                        </div>
                    </li>
                    <li class="swiper-slide">
                        <div class="overlay_img cake2">
                            <div class="overlay_body_color"></div>
                        </div>
                    </li>
                    <li class="swiper-slide">
                        <div class="overlay_img cake3">
                            <div class="overlay_body_color"></div>
                        </div>
                    </li>
                    <li class="swiper-slide">
                        <div class="overlay_img cake4">
                            <div class="overlay_body_color"></div>
                        </div>
                    </li>
                    <li class="swiper-slide">
                        <div class="overlay_img cake5">
                            <div class="overlay_body_color"></div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="select_color_wrap">
                <ul>
                    <li class="color_chip ffffff"></li>
                    <li class="color_chip FC3489"></li>
                    <li class="color_chip FFC9E0"></li>
                    <li class="color_chip FCDC34"></li>
                    <li class="color_chip FFA471"></li>
                    <li class="color_chip BBF4B6"></li>
                    <li class="color_chip A5DEFF"></li>
                    <li class="color_chip 94C0F3"></li>
                    <li class="color_chip E09FF6"></li>
                    <li class="plus plus_body">
                        <input type="color" name="body_color" id="body_color">
                    </li>
                </ul>
            </div>
            <div class="button body_select_btn">next</div>
        </div>
        <div class="section_cover section2">
            <p class="fontBasic30 center">생크림 형태와 컬러를<br>선택해주세요</p>
            <div class="select_array swiper-container cream_select_array">
                <ul class="swiper-wrapper">
                    <li class="swiper-slide">
                        <div class="overlay_img cream1 cream_shape">
                            <div class="overlay_cream_color"></div>
                        </div>
                        <div class="overlay_img body_shape_selected">
                            <div class="overlay_body_color"></div>
                        </div>
                    </li>
                    <li class="swiper-slide">
                        <div class="overlay_img cream2 cream_shape">
                            <div class="overlay_cream_color"></div>
                        </div>
                        <div class="overlay_img body_shape_selected">
                            <div class="overlay_body_color"></div>
                        </div>
                    </li>
                    <li class="swiper-slide">
                        <div class="overlay_img cream3 cream_shape">
                            <div class="overlay_cream_color"></div>
                        </div>
                        <div class="overlay_img body_shape_selected">
                            <div class="overlay_body_color"></div>
                        </div>
                    </li>
                    <li class="swiper-slide">
                        <div class="overlay_img cream0">
                        </div>
                        <div class="overlay_img body_shape_selected">
                            <div class="overlay_body_color"></div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="select_color_wrap">
                <ul>
                    <li class="color_chip_cream ffffff"></li>
                    <li class="color_chip_cream FC3489"></li>
                    <li class="color_chip_cream FFC9E0"></li>
                    <li class="color_chip_cream FCDC34"></li>
                    <li class="color_chip_cream FFA471"></li>
                    <li class="color_chip_cream BBF4B6"></li>
                    <li class="color_chip_cream A5DEFF"></li>
                    <li class="color_chip_cream 94C0F3"></li>
                    <li class="color_chip_cream E09FF6"></li>
                    <li class="plus plus_cream">
                        <input type="color" name="cream_color" id="cream_color">
                    </li>
                </ul>
            </div>
            <div class="button cream_select_btn">next</div>
        </div>
        <div class="section_cover section3">
            <p class="fontBasic30 center">to be continued</p>
        </div>
    </section>

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="/assets/js/index.js"></script>

    <script>
        const bodySelectArraySwiper = new Swiper('.body_select_array', {
            slidesPerView: 1,
            spaceBetween: 20,
            loop: true,
        });

        const overlayBodyColors = document.querySelectorAll('.overlay_body_color');

        const printColor = (color) => {
            const r = parseInt(color.substr(1, 2), 16)
            const g = parseInt(color.substr(3, 2), 16)
            const b = parseInt(color.substr(5, 2), 16)

            overlayBodyColors.forEach((overlayBodyColor) => {
                overlayBodyColor.style.backgroundColor = `rgba(${r}, ${g}, ${b}, 0.7)`;
            })
        }

        const inputBtn = document.querySelector('.plus_body');
        const inputBodyColor = document.querySelector('#body_color');
        inputBtn.addEventListener('click', () => {
            inputBodyColor.style.display = 'block';
            inputBodyColor.click();
        })
        inputBodyColor.addEventListener('change', () => {
            const colorValue = inputBodyColor.value;
            printColor(colorValue);
            inputBodyColor.style.display = 'none';
        })

        const colorChips = document.querySelectorAll('.color_chip');
        colorChips.forEach((colorChip) => {
            colorChip.addEventListener('click', () => {
                const colorChipBg = `#${colorChip.classList[1]}`;
                printColor(colorChipBg);
            })
        })

        // 선택된 케이크
        const cakeBodySelecteds = document.querySelectorAll('.body_shape_selected');
        const creamShapes = document.querySelectorAll('.cream_shape');

        const showSelectedbody = (bodyFormValue) => {
            cakeBodySelecteds.forEach((cakeBodySelected) => {
                console.dir(cakeBodySelected)
                cakeBodySelected.classList.add(`cake${bodyFormValue}`)
            })

            creamShapes.forEach((creamShape) => {
                const number = creamShape.classList[1].charAt(creamShape.classList[1].length - 1);
                creamShape.classList.add(`cream${bodyFormValue}-${number}`);
            })
        }

        const body_select_btn = document.querySelector('.body_select_btn');

        const section1 = document.querySelector('.section1');
        const section2 = document.querySelector('.section2');

        body_select_btn.addEventListener('click', () => {
            const bodyFormValue = bodySelectArraySwiper.activeIndex + 1;
            section1.style.display = "none";
            section2.style.display = "flex";
            showSelectedbody(bodyFormValue);
        })

        //section2
        const creamSelectArraySwiper = new Swiper('.cream_select_array', {
            slidesPerView: 1,
            spaceBetween: 20,
            loop: true,
        });

        const overlayCreamColors = document.querySelectorAll('.overlay_cream_color');

        const printCreamColor = (color) => {
            const r = parseInt(color.substr(1, 2), 16)
            const g = parseInt(color.substr(3, 2), 16)
            const b = parseInt(color.substr(5, 2), 16)

            overlayCreamColors.forEach((overlayCreamColor) => {
                overlayCreamColor.style.backgroundColor = `rgba(${r}, ${g}, ${b}, 0.7)`;
            })
        }

        const inputCreamBtn = document.querySelector('.plus_cream');
        const inputCreamColor = document.querySelector('#cream_color');
        inputCreamBtn.addEventListener('click', () => {
            inputCreamColor.style.display = 'block';
            inputCreamColor.click();
        })
        inputCreamColor.addEventListener('change', () => {
            const colorValue = inputCreamColor.value;
            printCreamColor(colorValue);
            inputCreamColor.style.display = 'none';
        })

        const colorCreamChips = document.querySelectorAll('.color_chip_cream');
        colorCreamChips.forEach((colorCreamChip) => {
            colorCreamChip.addEventListener('click', () => {
                const colorCreamChipBg = `#${colorCreamChip.classList[1]}`;
                printCreamColor(colorCreamChipBg);
            })
        })

        const cream_select_btn = document.querySelector('.cream_select_btn');
        const section3 = document.querySelector('.section3');

        cream_select_btn.addEventListener('click', () => {
            const creamFormValue = creamSelectArraySwiper.activeIndex + 1;
            section2.style.display = "none";
            section3.style.display = "flex";
            showSelectedbody(creamFormValue);
        })
    </script>
</body>

</html>